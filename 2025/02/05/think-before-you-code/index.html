<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Think Before You Code. | Ahmed Waleed</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="![file.png](https://media.licdn.com/dms/image/v2/D4D12AQEX6Ym3KdJ8jQ/article-coverimage-shrink7201280/article-coverimage-shrink7201280/0/1738746410551?e=1744243200&v=beta&t=Lls4fQEEEgaavcYCjmjTE ...">
    <link rel="preload" href="/assets/css/0.styles.f20e20f9.css" as="style"><link rel="preload" href="/assets/js/app.1fb7d40e.js" as="script"><link rel="preload" href="/assets/js/6.743e9d74.js" as="script"><link rel="preload" href="/assets/js/3.f19416b9.js" as="script"><link rel="preload" href="/assets/js/19.2ba1139c.js" as="script"><link rel="prefetch" href="/assets/js/10.69f07e0e.js"><link rel="prefetch" href="/assets/js/11.53f87820.js"><link rel="prefetch" href="/assets/js/12.6cb3cb61.js"><link rel="prefetch" href="/assets/js/13.ee096568.js"><link rel="prefetch" href="/assets/js/14.baac07d1.js"><link rel="prefetch" href="/assets/js/15.8cb653ed.js"><link rel="prefetch" href="/assets/js/16.2f940b97.js"><link rel="prefetch" href="/assets/js/17.1c30e4ab.js"><link rel="prefetch" href="/assets/js/18.9faaaf2e.js"><link rel="prefetch" href="/assets/js/20.a1b987cf.js"><link rel="prefetch" href="/assets/js/21.b9ab4ee6.js"><link rel="prefetch" href="/assets/js/4.f8c1731c.js"><link rel="prefetch" href="/assets/js/5.e490764a.js"><link rel="prefetch" href="/assets/js/7.a54a7d27.js"><link rel="prefetch" href="/assets/js/8.bde22fe0.js"><link rel="prefetch" href="/assets/js/9.ce3d6c06.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.c82c253b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f20e20f9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Ahmed Waleed </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Ahmed Waleed </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Think Before You Code.
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Ahmed Waleed</span> <span itemprop="address">   in Dubai, UAE</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2025-2-05">
      Wed Feb 05 2025
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/golang" data-v-42ccfcd5><span data-v-42ccfcd5>golang</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/design" data-v-42ccfcd5><span data-v-42ccfcd5>design</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p><img src="https://media.licdn.com/dms/image/v2/D4D12AQEX6Ym3KdJ8jQ/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1738746410551?e=1744243200&amp;v=beta&amp;t=Lls4fQEEEgaavcYCjmjTE1IXkRV651XsIrQ2GG14Q-s" alt="file.png"></p> <h2 id="think-before-you-code"><a href="#think-before-you-code" class="header-anchor">#</a> Think Before You Code</h2> <p>It is often said that thinking about a problem makes you a better engineer. But how true is that? Taking the time to analyze a problem allows you to see the bigger picture. It helps you understand the problem from different perspectives and develop a more effective solution.</p> <p>There are different scenarios where this applies, such as solving a LeetCode problem for fun, debugging an issue, or building a new feature. When developing a feature, proper design and planning are essential. Considerations include:
Defining the acceptance criteria.</p> <ul><li>Ensuring the initial solution meets the end user's expectations.</li> <li>Designing API contracts, selecting appropriate data structures, and ensuring backward compatibility.</li> <li>Making decisions that facilitate future extensibility.</li></ul> <h2 id="the-rush-to-code-naive-approach"><a href="#the-rush-to-code-naive-approach" class="header-anchor">#</a> The Rush to Code (Naïve Approach)</h2> <p>As programmers, we often rush into coding out of excitement or passion. Once a requirement document is ready, a story is finalized, or a brief discussion concludes, we immediately open our IDE or Vim (wink) and start coding. Early in our careers, this seems like the fastest approach, but eventually, we realize it actually slows us down. When we release to production, we encounter unexpected bugs, edge cases, and regressions, leading to multiple iterations and rewrites.</p> <p>Let's consider an example to illustrate this point.</p> <h3 id="problem-statement"><a href="#problem-statement" class="header-anchor">#</a> Problem Statement</h3> <p><strong>Build a Log File Analyzer CLI tool
Requirements:</strong></p> <ol><li>Accept a file path as input (via an argument or flag).</li> <li>Analyze the file and display:
<ul><li>Total number of lines.</li> <li>Number of error messages (lines containing &quot;ERROR&quot;).</li> <li>Average response time if log lines contain response time data.</li></ul></li></ol> <p><strong>Sample Log File (sample.log):</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token number">2025</span>-01-01 <span class="token number">10</span>:00:00 INFO Starting the application
<span class="token number">2025</span>-01-01 <span class="token number">11</span>:01:00 DEBUG Initializing module X
<span class="token number">2025</span>-01-01 <span class="token number">12</span>:02:00 ERROR Failed to connect to database
<span class="token number">2025</span>-01-01 <span class="token number">13</span>:03:05 INFO Application stopped
<span class="token number">2025</span>-01-01 <span class="token number">14</span>:04:00 WARN Memory usage is high
<span class="token number">2025</span>-01-01 <span class="token number">15</span>:05:00 INFO Request processed <span class="token keyword">in</span> <span class="token number">120</span> ms
<span class="token number">2025</span>-01-01 <span class="token number">16</span>:06:00 INFO Request processed <span class="token keyword">in</span> <span class="token number">250</span> ms
<span class="token number">2025</span>-01-01 <span class="token number">17</span>:07:00 INFO Request processed <span class="token keyword">in</span> <span class="token number">300</span> ms
</code></pre></div><p>A few years ago, I would have approached this problem without much thought, jumping straight into coding:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Analyze Analyze logs and return the analysis report.</span>
<span class="token comment">// Each log entry will be tested against the provided filter.</span>
<span class="token keyword">func</span> <span class="token function">Analyze</span><span class="token punctuation">(</span>f <span class="token operator">*</span>os<span class="token punctuation">.</span>File<span class="token punctuation">)</span> <span class="token operator">*</span>Matrics <span class="token punctuation">{</span>
    report <span class="token operator">:=</span> <span class="token operator">&amp;</span>Matrics<span class="token punctuation">{</span>
        ResponseTime<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    s <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    <span class="token keyword">for</span> s<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        line <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        logLine <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>logLine<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">4</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        <span class="token boolean">_</span><span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> level<span class="token punctuation">,</span> msg <span class="token operator">:=</span> logLine<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>

        report<span class="token punctuation">.</span>TotalEntries<span class="token operator">++</span>

        <span class="token comment">// Record the log level count.</span>
        <span class="token keyword">switch</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">:</span>
            report<span class="token punctuation">.</span>Info<span class="token operator">++</span>
        <span class="token keyword">case</span> <span class="token string">&quot;warn&quot;</span><span class="token punctuation">:</span>
            report<span class="token punctuation">.</span>Warn<span class="token operator">++</span>
        <span class="token keyword">case</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">:</span>
            report<span class="token punctuation">.</span>Error<span class="token operator">++</span>
        <span class="token keyword">case</span> <span class="token string">&quot;debug&quot;</span><span class="token punctuation">:</span>
            report<span class="token punctuation">.</span>Debug<span class="token operator">++</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Record the response time.</span>
        <span class="token keyword">if</span> strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            words <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSuffix</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">&quot; ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
            respTime <span class="token operator">:=</span> words<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> n<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span>respTime<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                report<span class="token punctuation">.</span>ResponseTime <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>report<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">,</span> <span class="token function">float64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> report
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Matrics <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    TotalEntries <span class="token builtin">int</span>
    Info         <span class="token builtin">int</span>
    Warn         <span class="token builtin">int</span>
    Error        <span class="token builtin">int</span>
    Debug        <span class="token builtin">int</span>
    ResponseTime <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span> <span class="token comment">// in ms</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r Matrics<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Total Log Entries: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>TotalEntries<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;INFO: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Info<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;DEBUG: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;WARN: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Warn<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ERROR: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Error<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> total <span class="token builtin">float64</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> r<span class="token punctuation">.</span>ResponseTime <span class="token punctuation">{</span>
            total <span class="token operator">+=</span> v
        <span class="token punctuation">}</span>
        avg <span class="token operator">:=</span> total <span class="token operator">/</span> <span class="token function">float64</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Average Response Time: %.2f ms\n&quot;</span><span class="token punctuation">,</span> avg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>While this solution works, it has several issues:</p> <ol><li>The Analyze function is limited to accepting only *os.File as an input source, preventing future extensions (e.g., HTTP, RPC input sources).</li> <li>The Analyze function violates the Single Responsibility Principle; it handles multiple tasks, including scanning files, parsing log entries, and collecting metrics.</li> <li>Non-functional requirements such as handling empty files and invalid log formats are not addressed.</li> <li>The implementation lacks scalability for handling different input sources and varying data sizes.</li></ol> <h2 id="a-thoughtful-approach-thinking-before-coding"><a href="#a-thoughtful-approach-thinking-before-coding" class="header-anchor">#</a> A Thoughtful Approach (Thinking Before Coding)</h2> <p>By applying the &quot;Think Before You Code&quot; principle, I could have approached the problem as follows:</p> <h3 id="step-1-create-a-mental-model"><a href="#step-1-create-a-mental-model" class="header-anchor">#</a> Step 1: Create a Mental Model</h3> <p>Before writing any code, I need to create a mental model of how the system should work. This involves:</p> <ul><li>Understanding the input and output.</li> <li>Identifying core functionalities.</li> <li>Considering edge cases and non-functional requirements.</li></ul> <p>Let's whiteboard the problem. The following image illustrates the abstract mental model of the given problem.</p> <p><img src="https://media.licdn.com/dms/image/v2/D4D12AQGOmOIGolU-jA/article-inline_image-shrink_1000_1488/article-inline_image-shrink_1000_1488/0/1738743759318?e=1744243200&amp;v=beta&amp;t=RNs6u6LPAqdljRJxz4Q7i4-BaUFasorYKkbsxr20eBA" alt="file.png"></p> <h3 id="step-2-break-down-the-problem-into-use-cases"><a href="#step-2-break-down-the-problem-into-use-cases" class="header-anchor">#</a> Step 2: Break Down the Problem into Use Cases</h3> <p>Each use case should be independent and contribute to solving the problem incrementally:</p> <ol><li>Each use case should be independent and contribute to solving the problem incrementally:</li> <li>Read the input source (file): validate the file format; skip invalid entries; log errors.</li> <li>Parse the log entry: skip invalid formatted entries; choose an appropriate data structure to represent each field.</li> <li>Analyze the log data: Apply various filters to extract relevant insights; Log a message if no relevant entries are found; Choose a suitable data structure for the report; Add parsed entries to the report;</li></ol> <h3 id="step-3-implement-the-solution"><a href="#step-3-implement-the-solution" class="header-anchor">#</a> Step 3: Implement the Solution</h3> <ul><li><strong>Read Input Source</strong></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// ReadFile read given source input and valid log entries.</span>
<span class="token comment">// Log entry not following the format will be skipped.</span>
<span class="token keyword">func</span> <span class="token function">ReadFile</span><span class="token punctuation">(</span>r io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>LogEntry <span class="token punctuation">{</span>
    <span class="token keyword">var</span> entries <span class="token punctuation">[</span><span class="token punctuation">]</span>LogEntry
    s <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    <span class="token keyword">for</span> s<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        line <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        entry<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">NewLogEntry</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;invalid log entry: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        entries <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>entries<span class="token punctuation">,</span> entry<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> entries
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Parse Log Entries</strong></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewLogEntry</span><span class="token punctuation">(</span>line <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>LogEntry<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logLine <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>logLine<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">4</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> LogEntry<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;invalid log entry&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    logDate<span class="token punctuation">,</span> logTime<span class="token punctuation">,</span> level<span class="token punctuation">,</span> msg <span class="token operator">:=</span> logLine<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> logLine<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
    t<span class="token punctuation">,</span> err <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>DateTime<span class="token punctuation">,</span> logDate<span class="token operator">+</span><span class="token string">&quot; &quot;</span><span class="token operator">+</span>logTime<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> LogEntry<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;invalid log time: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> LogEntry<span class="token punctuation">{</span>
        time<span class="token punctuation">:</span>    t<span class="token punctuation">,</span>
        level<span class="token punctuation">:</span>   level<span class="token punctuation">,</span>
        message<span class="token punctuation">:</span> msg<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> LogEntry <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    time    time<span class="token punctuation">.</span>Time
    level   <span class="token builtin">string</span>
    message <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>Analyze the Log Data</strong></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Analyze Analyze logs and return the analysis report.</span>
<span class="token comment">// Each log entry will be tested against the provided filter.</span>
<span class="token keyword">func</span> <span class="token function">Analyze</span><span class="token punctuation">(</span>entries <span class="token punctuation">[</span><span class="token punctuation">]</span>LogEntry<span class="token punctuation">,</span> filter <span class="token operator">...</span>FilterFunc<span class="token punctuation">)</span> <span class="token operator">*</span>AnalysisReport <span class="token punctuation">{</span>
	report <span class="token operator">:=</span> <span class="token operator">&amp;</span>AnalysisReport<span class="token punctuation">{</span>
		ResponseTime<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> entry <span class="token operator">:=</span> <span class="token keyword">range</span> entries <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> skip <span class="token operator">:=</span> <span class="token keyword">range</span> filter <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token function">skip</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		report<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> report
<span class="token punctuation">}</span>

<span class="token keyword">type</span> AnalysisReport <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    TotalEntries <span class="token builtin">int</span>
    Info         <span class="token builtin">int</span>
    Warn         <span class="token builtin">int</span>
    Error        <span class="token builtin">int</span>
    Debug        <span class="token builtin">int</span>
    ResponseTime <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span> <span class="token comment">// in ms</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>report <span class="token operator">*</span>AnalysisReport<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>entry LogEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    report<span class="token punctuation">.</span>TotalEntries<span class="token operator">++</span>

    <span class="token comment">// Record the log level count.</span>
    <span class="token keyword">switch</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> LevelInfo<span class="token punctuation">:</span>
        report<span class="token punctuation">.</span>Info<span class="token operator">++</span>
    <span class="token keyword">case</span> LevelWarn<span class="token punctuation">:</span>
        report<span class="token punctuation">.</span>Warn<span class="token operator">++</span>
    <span class="token keyword">case</span> LevelError<span class="token punctuation">:</span>
        report<span class="token punctuation">.</span>Error<span class="token operator">++</span>
    <span class="token keyword">case</span> LevelDebug<span class="token punctuation">:</span>
        report<span class="token punctuation">.</span>Debug<span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Record the response time.</span>
    <span class="token keyword">if</span> strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        words <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSuffix</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token string">&quot; ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        respTime <span class="token operator">:=</span> words<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> n<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span>respTime<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            report<span class="token punctuation">.</span>ResponseTime <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>report<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">,</span> <span class="token function">float64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r <span class="token operator">*</span>AnalysisReport<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Total Log Entries: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>TotalEntries<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;INFO: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Info<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;DEBUG: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;WARN: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Warn<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ERROR: %d\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Error<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> total <span class="token builtin">float64</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> r<span class="token punctuation">.</span>ResponseTime <span class="token punctuation">{</span>
            total <span class="token operator">+=</span> v
        <span class="token punctuation">}</span>
        avg <span class="token operator">:=</span> total <span class="token operator">/</span> <span class="token function">float64</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>ResponseTime<span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Average Response Time: %.2f ms\n&quot;</span><span class="token punctuation">,</span> avg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Each use case is translated into smaller, modular units of code, avoiding unnecessary rewrites and iterations. By investing time in planning and designing the solution upfront, we achieve:</p> <ul><li>Better maintainability</li> <li>Scalability</li> <li>More reliable solution</li></ul> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Jumping into coding without fully understanding the problem never makes you an efficient programmer or a good problem solver. So, the next time you tackle a problem—pause. <strong>Think before you code</strong>.
For the full implementation, visit <a href="https://github.com/AhmadWaleed/bites/tree/main/cmd/log-analyzer" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#think-before-you-code" title="Think Before You Code">Think Before You Code</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#the-rush-to-code-naive-approach" title="The Rush to Code (Naïve Approach)">The Rush to Code (Naïve Approach)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#problem-statement" title="Problem Statement">Problem Statement</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#a-thoughtful-approach-thinking-before-coding" title="A Thoughtful Approach (Thinking Before Coding)">A Thoughtful Approach (Thinking Before Coding)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-1-create-a-mental-model" title="Step 1: Create a Mental Model">Step 1: Create a Mental Model</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-2-break-down-the-problem-into-use-cases" title="Step 2: Break Down the Problem into Use Cases">Step 2: Break Down the Problem into Use Cases</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#step-3-implement-the-solution" title="Step 3: Implement the Solution">Step 3: Implement the Solution</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#conclusion" title="Conclusion">Conclusion</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/AhmadWaleed" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="mailto:ahmedwaleed11599@gmail.com" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-3d9deeb8><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-3d9deeb8></path><polyline points="22,6 12,13 2,6" data-v-3d9deeb8></polyline></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>Ahmed Waleed © 2022</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1fb7d40e.js" defer></script><script src="/assets/js/6.743e9d74.js" defer></script><script src="/assets/js/3.f19416b9.js" defer></script><script src="/assets/js/19.2ba1139c.js" defer></script>
  </body>
</html>
